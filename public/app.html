<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Car Entries â€” React App (A4)</title>
    <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@2/css/pico.min.css">
</head>

<body>
    <main id="main"><div id="root"></div></main>
</body>

</html>

<script type="module">
    import React, { useEffect, useMemo, useState } from 'https://esm.sh/react@18';
    import { createRoot } from 'https://esm.sh/react-dom@18/client';

    function AddForm({ onAdded }) {
        const [model, setModel] = useState('');
        const [year,  setYear]  = useState('');
        const [mpg,   setMpg]   = useState('');
        async function submit(e){
            e.preventDefault();
            await api.add({ model, year:+year, mpg:+mpg });
            setModel(''); setYear(''); setMpg('');
            onAdded?.();
        }
        return (
            <article>
            <h2>Add Entry</h2>
            <form onSubmit={submit} className="grid">
                <label>Model <input value={model} onChange={e=>setModel(e.target.value)} required /></label>
                <label>Year  <input type="number" value={year}  onChange={e=>setYear(e.target.value)} required /></label>
                <label>MPG   <input type="number" value={mpg}   onChange={e=>setMpg(e.target.value)} required /></label>
                <button>Add</button>
            </form>
            </article>
        );
    }

    function UpdateForm({ onUpdated }){
        const [id,setId] = useState(''); const [model,setModel]=useState(''); const [year,setYear]=useState(''); const [mpg,setMpg]=useState('');
        async function submit(e){
            e.preventDefault();
            const body={}; if(model) body.model=model; if(year) body.year=+year; if(mpg) body.mpg=+mpg;
            if(!id || !Object.keys(body).length) return;
            await api.update(id, body); setId(''); setModel(''); setYear(''); setMpg(''); onUpdated?.();
        }
        return () //BOOKMARK <---------- 
    }

</script>
